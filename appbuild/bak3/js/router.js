define(["jquery","underscore","backbone","models/query/queryModel","views/query/stepbystepView","views/query/selectCriteriaView","views/query/selectResultsView","views/query/previewResultsView","views/overlay/overlay"],function(e,t,n,r,i,s,o,u){var a=n.Router.extend({routes:{"step/start":"start","step/:view":"step","*actions":"defaultRoute"}}),f=function(){var t=new a,f=function(){var n=new r;e("#step-by-step-container").html(""),i.initialize(t,n),i.insertView({ref:new s({model:n,stepByStepView:i}),tab:"selectCriteria",tabTitle:"",hideTab:!1,hideNav:!0,pos:0}),i.insertView({ref:new o({model:n,stepByStepView:i}),tab:"selectResults",tabTitle:"",hideTab:!1,hideNav:!0,pos:1}),i.insertView({ref:new u({model:n,stepByStepView:i}),tab:"previewResults",tabTitle:"",hideTab:!1,hideNav:!0,pos:2}),i.router=t,e("#step-by-step-container").append(i.render().el)};t.on("route:start",function(){f()}),t.on("route:step",function(e){try{i.moveToTab(e)}catch(t){window.location="index.html"}}),t.on("route:defaultRoute",function(e){f()}),n.history.start()};return{initialize:f}});