(function(e,t){e.Papa=t()})(this,function(){function f(t,n){n=n||{},n.dynamicTyping=n.dynamicTyping||!1;if(n.worker&&u.WORKERS_SUPPORTED){var r=y();r.userStep=n.step,r.userChunk=n.chunk,r.userComplete=n.complete,r.userError=n.error,n.step=N(n.step),n.chunk=N(n.chunk),n.complete=N(n.complete),n.error=N(n.error),delete n.worker,r.postMessage({input:t,config:n,workerId:r.id});return}var i=null;if(typeof t=="string")n.download?i=new h(n):i=new d(n);else if(e.File&&t instanceof File||t instanceof Object)i=new p(n);return i.stream(t)}function l(e,t){function a(){if(typeof t!="object")return;typeof t.delimiter=="string"&&t.delimiter.length===1&&u.BAD_DELIMITERS.indexOf(t.delimiter)===-1&&(s=t.delimiter);if(typeof t.quotes=="boolean"||t.quotes instanceof Array)i=t.quotes;typeof t.newline=="string"&&(o=t.newline)}function f(e){if(typeof e!="object")return[];var t=[];for(var n in e)t.push(n);return t}function l(e,t){var n="";typeof e=="string"&&(e=JSON.parse(e)),typeof t=="string"&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array);if(r){for(var u=0;u<e.length;u++)u>0&&(n+=s),n+=c(e[u],u);t.length>0&&(n+=o)}for(var a=0;a<t.length;a++){var f=r?e.length:t[a].length;for(var l=0;l<f;l++){l>0&&(n+=s);var h=r&&i?e[l]:l;n+=c(t[a][h],l)}a<t.length-1&&(n+=o)}return n}function c(e,t){if(typeof e=="undefined"||e===null)return"";e=e.toString().replace(/"/g,'""');var n=typeof i=="boolean"&&i||i instanceof Array&&i[t]||h(e,u.BAD_DELIMITERS)||e.indexOf(s)>-1||e.charAt(0)===" "||e.charAt(e.length-1)===" ";return n?'"'+e+'"':e}function h(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var n="",r=[],i=!1,s=",",o="\r\n";a(),typeof e=="string"&&(e=JSON.parse(e));if(e instanceof Array){if(!e.length||e[0]instanceof Array)return l(null,e);if(typeof e[0]=="object")return l(f(e[0]),e)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=e.data[0]instanceof Array?e.fields:f(e.data[0])),!(e.data[0]instanceof Array)&&typeof e.data[0]!="object"&&(e.data=[e.data])),l(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function c(t){function r(e){var t=x(e);t.chunkSize=parseInt(t.chunkSize),!e.step&&!e.chunk&&(t.chunkSize=null),this._handle=new v(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},r.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&N(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);r!==undefined&&(t=r)}this.isFirstChunk=!1;var i=this._partialLine+t;this._partialLine="";var s=this._handle.parse(i,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted())return;var o=s.meta.cursor;this._finished||(this._partialLine=i.substring(o-this._baseIndex),this._baseIndex=o),s&&s.data&&(this._rowCount+=s.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:s,workerId:u.WORKER_ID,finished:a});else if(N(this._config.chunk)){this._config.chunk(s,this._handle);if(this._paused)return;s=undefined,this._completeResults=undefined}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),a&&N(this._config.complete)&&(!s||!s.meta.aborted)&&this._config.complete(this._completeResults,this._input),!a&&(!s||!s.meta.paused)&&this._nextChunk(),s},this._sendError=function(t){N(this._config.error)?this._config.error(t):n&&this._config.error&&e.postMessage({workerId:u.WORKER_ID,error:t,finished:!1})}}function h(e){function r(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=u.RemoteChunkSize),c.call(this,e);var n;t?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),t||(n.onload=T(this._chunkLoaded,this),n.onerror=T(this._chunkError,this)),n.open("GET",this._input,!t);if(this._config.chunkSize){var e=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+e),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(r){this._chunkError(r.message)}t&&n.status===0?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(n.readyState!=4)return;if(n.status<200||n.status>=400){this._chunkError();return}this._finished=!this._config.chunkSize||this._start>r(n),this.parseChunk(n.responseText)},this._chunkError=function(e){var t=n.statusText||e;this._sendError(t)}}function p(e){e=e||{},e.chunkSize||(e.chunkSize=u.LocalChunkSize),c.call(this,e);var t,n,r=typeof FileReader!="undefined";this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?(t=new FileReader,t.onload=T(this._chunkLoaded,this),t.onerror=T(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var s=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){e=e||{},c.call(this,e);var t,n;this.stream=function(e){return t=e,n=e,this._nextChunk()},this._nextChunk=function(){if(this._finished)return;var e=this._config.chunkSize,t=e?n.substr(0,e):n;return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}function v(e){function p(){c&&f&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),f=!1);if(e.skipEmptyLines)for(var t=0;t<c.data.length;t++)c.data[t].length===1&&c.data[t][0]===""&&c.data.splice(t--,1);return d()&&v(),y()}function d(){return e.header&&l.length===0}function v(){if(!c)return;for(var e=0;d()&&e<c.data.length;e++)for(var t=0;t<c.data[e].length;t++)l.push(c.data[e][t]);c.data.splice(0,1)}function g(t,n){return(e.dynamicTyping[t]||e.dynamicTyping)===!0?n==="true"||n==="TRUE"?!0:n==="false"||n==="FALSE"?!1:E(n):n}function y(){if(!c||!e.header&&!e.dynamicTyping)return c;for(var t=0;t<c.data.length;t++){var n=e.header?{}:[];for(var r=0;r<c.data[t].length;r++){var i=r,s=c.data[t][r];e.header&&(i=r>=l.length?"__parsed_extra":l[r]),s=g(i,s),i==="__parsed_extra"?(n[i]=n[i]||[],n[i].push(s)):n[i]=s}c.data[t]=n,e.header&&(r>l.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+l.length+" fields but parsed "+r,t):r<l.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+l.length+" fields but parsed "+r,t))}return e.header&&c.meta&&(c.meta.fields=l),c}function b(t,n){var r=[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP],i,s,o;for(var a=0;a<r.length;a++){var f=r[a],l=0,c=0;o=undefined;var h=(new m({delimiter:f,newline:n,preview:10})).parse(t);for(var p=0;p<h.data.length;p++){var d=h.data[p].length;c+=d;if(typeof o=="undefined"){o=d;continue}d>1&&(l+=Math.abs(d-o),o=d)}h.data.length>0&&(c/=h.data.length),(typeof s=="undefined"||l<s)&&c>1.99&&(s=l,i=f)}return e.delimiter=i,{successful:!!i,bestDelimiter:i}}function w(e){e=e.substr(0,1048576);var t=e.split("\r"),n=e.split("\n"),r=n.length>1&&n[0].length<t[0].length;if(t.length===1||r)return"\n";var i=0;for(var s=0;s<t.length;s++)t[s][0]==="\n"&&i++;return i>=t.length/2?"\r\n":"\r"}function E(e){var n=t.test(e);return n?parseFloat(e):e}function S(e,t,n,r){c.errors.push({type:e,code:t,message:n,row:r})}var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=this,r=0,i,s,o=!1,a=!1,f,l=[],c={data:[],errors:[],meta:{}};if(N(e.step)){var h=e.step;e.step=function(t){c=t;if(d())p();else{p();if(c.data.length===0)return;r+=t.data.length,e.preview&&r>e.preview?s.abort():h(c,n)}}}this.parse=function(t,n,r){e.newline||(e.newline=w(t)),f=!1;if(!e.delimiter){var a=b(t,e.newline);a.successful?e.delimiter=a.bestDelimiter:(f=!0,e.delimiter=u.DefaultDelimiter),c.meta.delimiter=e.delimiter}var l=x(e);return e.preview&&e.header&&l.preview++,i=t,s=new m(l),c=s.parse(i,n,r),p(),o?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return o},this.pause=function(){o=!0,s.abort(),i=i.substr(s.getCharIndex())},this.resume=function(){o=!1,n.streamer.parseChunk(i)},this.aborted=function(){return a},this.abort=function(){a=!0,s.abort(),c.meta.aborted=!0,N(e.complete)&&e.complete(c),i=""}}function m(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,s=e.preview,o=e.fastMode,a=e.quoteChar||'"';if(typeof t!="string"||u.BAD_DELIMITERS.indexOf(t)>-1)t=",";if(r===t)throw"Comment character same as delimiter";if(r===!0)r="#";else if(typeof r!="string"||u.BAD_DELIMITERS.indexOf(r)>-1)r=!1;n!="\n"&&n!="\r"&&n!="\r\n"&&(n="\n");var f=0,l=!1;this.parse=function(e,u,c){function L(e){g.push(e),w=f}function A(t){return c?M():(typeof t=="undefined"&&(t=e.substr(f)),b.push(t),f=h,L(b),m&&_(),M())}function O(t){f=t,L(b),b=[],T=e.indexOf(n,f)}function M(e){return{data:g,errors:y,meta:{delimiter:t,linebreak:n,aborted:l,truncated:!!e,cursor:w+(u||0)}}}function _(){i(M()),g=[],y=[]}if(typeof e!="string")throw"Input must be a string";var h=e.length,p=t.length,d=n.length,v=r.length,m=typeof i=="function";f=0;var g=[],y=[],b=[],w=0;if(!e)return M();if(o||o!==!1&&e.indexOf(a)===-1){var E=e.split(n);for(var S=0;S<E.length;S++){var b=E[S];f+=b.length;if(S!==E.length-1)f+=n.length;else if(c)return M();if(r&&b.substr(0,v)===r)continue;if(m){g=[],L(b.split(t)),_();if(l)return M()}else L(b.split(t));if(s&&S>=s)return g=g.slice(0,s),M(!0)}return M()}var x=e.indexOf(t,f),T=e.indexOf(n,f),N=new RegExp(a+a,"g");for(;;){if(e[f]===a){var C=f;f++;for(;;){var C=e.indexOf(a,C+1);if(C===-1)return c||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:g.length,index:f}),A();if(C===h-1){var k=e.substring(f,C).replace(N,a);return A(k)}if(e[C+1]===a){C++;continue}if(e[C+1]===t){b.push(e.substring(f,C).replace(N,a)),f=C+1+p,x=e.indexOf(t,f),T=e.indexOf(n,f);break}if(e.substr(C+1,d)===n){b.push(e.substring(f,C).replace(N,a)),O(C+1+d),x=e.indexOf(t,f);if(m){_();if(l)return M()}if(s&&g.length>=s)return M(!0);break}}continue}if(r&&b.length===0&&e.substr(f,v)===r){if(T===-1)return M();f=T+d,T=e.indexOf(n,f),x=e.indexOf(t,f);continue}if(x!==-1&&(x<T||T===-1)){b.push(e.substring(f,x)),f=x+p,x=e.indexOf(t,f);continue}if(T!==-1){b.push(e.substring(f,T)),O(T+d);if(m){_();if(l)return M()}if(s&&g.length>=s)return M(!0);continue}break}return A()},this.abort=function(){l=!0},this.getCharIndex=function(){return f}}function g(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function y(){if(!u.WORKERS_SUPPORTED)return!1;if(!r&&u.SCRIPT_PATH===null)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=u.SCRIPT_PATH||i;t+=(t.indexOf("?")!==-1?"&":"?")+"papaworker";var n=new e.Worker(t);return n.onmessage=b,n.id=o++,s[n.id]=n,n}function b(e){var t=e.data,n=s[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i=function(){r=!0,w(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},o={abort:i,pause:E,resume:E};if(N(n.userStep)){for(var u=0;u<t.results.data.length;u++){n.userStep({data:[t.results.data[u]],errors:t.results.errors,meta:t.results.meta},o);if(r)break}delete t.results}else N(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!r&&w(t.workerId,t.results)}function w(e,t){var n=s[e];N(n.userComplete)&&n.userComplete(t),n.terminate(),delete s[e]}function E(){throw"Not implemented."}function S(t){var n=t.data;typeof u.WORKER_ID=="undefined"&&n&&(u.WORKER_ID=n.workerId);if(typeof n.input=="string")e.postMessage({workerId:u.WORKER_ID,results:u.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=u.parse(n.input,n.config);r&&e.postMessage({workerId:u.WORKER_ID,results:r,finished:!0})}}function x(e){if(typeof e!="object")return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=x(e[n]);return t}function T(e,t){return function(){e.apply(t,arguments)}}function N(e){return typeof e=="function"}var e=Function("return this")(),t=!e.document&&!!e.postMessage,n=t&&/(\?|&)papaworker(=|&|$)/.test(e.location.search),r=!1,i,s={},o=0,u={};u.parse=f,u.unparse=l,u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="﻿",u.BAD_DELIMITERS=["\r","\n",'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!t&&!!e.Worker,u.SCRIPT_PATH=null,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=m,u.ParserHandle=v,u.NetworkStreamer=h,u.FileStreamer=p,u.StringStreamer=d;if(e.jQuery){var a=e.jQuery;a.fn.parse=function(t){function i(){if(r.length===0){N(t.complete)&&t.complete();return}var e=r[0];if(N(t.before)){var n=t.before(e.file,e.inputElem);if(typeof n=="object"){if(n.action==="abort"){s("AbortError",e.file,e.inputElem,n.reason);return}if(n.action==="skip"){o();return}typeof n.config=="object"&&(e.instanceConfig=a.extend(e.instanceConfig,n.config))}else if(n==="skip"){o();return}}var i=e.instanceConfig.complete;e.instanceConfig.complete=function(t){N(i)&&i(t,e.file,e.inputElem),o()},u.parse(e.file,e.instanceConfig)}function s(e,n,r,i){N(t.error)&&t.error({name:e},n,r,i)}function o(){r.splice(0,1),i()}var n=t.config||{},r=[];return this.each(function(t){var i=a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&e.FileReader;if(!i||!this.files||this.files.length===0)return!0;for(var s=0;s<this.files.length;s++)r.push({file:this.files[s],inputElem:this,instanceConfig:a.extend({},n)})}),i(),this}}return n?e.onmessage=S:u.WORKERS_SUPPORTED&&(i=g(),document.body?document.addEventListener("DOMContentLoaded",function(){r=!0},!0):r=!0),h.prototype=Object.create(c.prototype),h.prototype.constructor=h,p.prototype=Object.create(c.prototype),p.prototype.constructor=p,d.prototype=Object.create(d.prototype),d.prototype.constructor=d,u});