(function(e,t){e.X2JS=t()})(this,function(){return function(e){function n(){e.escapeMode===undefined&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",e.enableToStringFunc===undefined&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],e.skipEmptyTextNodesForObj===undefined&&(e.skipEmptyTextNodesForObj=!0),e.stripWhitespaces===undefined&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],e.useDoubleQuotes===undefined&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],e.keepCData===undefined&&(e.keepCData=!1)}function i(){}function s(e){var t=e.localName;t==null&&(t=e.baseName);if(t==null||t=="")t=e.nodeName;return t}function o(e){return e.prefix}function u(e){return typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function a(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}function f(e,t,n,r){var i=0;for(;i<e.length;i++){var s=e[i];if(typeof s=="string"){if(s==r)break}else if(s instanceof RegExp){if(s.test(r))break}else if(typeof s=="function"&&s(t,n,r))break}return i!=e.length}function l(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&f(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function c(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]);if(t[6]&&t[7]){var i=t[6]*60+Number(t[7]),s=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+(s=="-"?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function h(t,n,r){if(e.datetimeAccessFormPaths.length>0){var i=r.split(".#")[0];return f(e.datetimeAccessFormPaths,t,n,i)?c(t):t}return t}function p(t,n,i,s){return n==r.ELEMENT_NODE&&e.xmlElementsFilter.length>0?f(e.xmlElementsFilter,t,i,s):!0}function d(t,n){if(t.nodeType==r.DOCUMENT_NODE){var i=new Object,u=t.childNodes;for(var a=0;a<u.length;a++){var f=u.item(a);if(f.nodeType==r.ELEMENT_NODE){var c=s(f);i[c]=d(f,c)}}return i}if(t.nodeType==r.ELEMENT_NODE){var i=new Object;i.__cnt=0;var u=t.childNodes;for(var a=0;a<u.length;a++){var f=u.item(a),c=s(f);if(f.nodeType!=r.COMMENT_NODE){var v=n+"."+c;p(i,f.nodeType,c,v)&&(i.__cnt++,i[c]==null?(i[c]=d(f,v),l(i,c,v)):(i[c]!=null&&(i[c]instanceof Array||(i[c]=[i[c]],l(i,c,v))),i[c][i[c].length]=d(f,v)))}}for(var m=0;m<t.attributes.length;m++){var g=t.attributes.item(m);i.__cnt++,i[e.attributePrefix+g.name]=g.value}var y=o(t);return y!=null&&y!=""&&(i.__cnt++,i.__prefix=y),i["#text"]!=null&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),e.stripWhitespaces&&(i.__text=i.__text.trim()),delete i["#text"],e.arrayAccessForm=="property"&&delete i["#text_asArray"],i.__text=h(i.__text,c,n+"."+c)),i["#cdata-section"]!=null&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],e.arrayAccessForm=="property"&&delete i["#cdata-section_asArray"]),i.__cnt==0&&e.emptyNodeForm=="text"?i="":i.__cnt==1&&i.__text!=null?i=i.__text:i.__cnt==1&&i.__cdata!=null&&!e.keepCData?i=i.__cdata:i.__cnt>1&&i.__text!=null&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&i.__text==""||i.__text.trim()=="")&&delete i.__text,delete i.__cnt,e.enableToStringFunc&&(i.__text!=null||i.__cdata!=null)&&(i.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),i}if(t.nodeType==r.TEXT_NODE||t.nodeType==r.CDATA_SECTION_NODE)return t.nodeValue}function v(t,n,r,i){var s="<"+(t!=null&&t.__prefix!=null?t.__prefix+":":"")+n;if(r!=null)for(var o=0;o<r.length;o++){var a=r[o],f=t[a];e.escapeMode&&(f=u(f)),s+=" "+a.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?s+='"'+f+'"':s+="'"+f+"'"}return i?s+="/>":s+=">",s}function m(e,t){return"</"+(e.__prefix!=null?e.__prefix+":":"")+t+">"}function g(e,t){return e.indexOf(t,e.length-t.length)!==-1}function y(t,n){return e.arrayAccessForm=="property"&&g(n.toString(),"_asArray")||n.toString().indexOf(e.attributePrefix)==0||n.toString().indexOf("__")==0||t[n]instanceof Function?!0:!1}function b(e){var t=0;if(e instanceof Object)for(var n in e){if(y(e,n))continue;t++}return t}function w(t,n,r){return e.jsonPropertiesFilter.length==0||r==""||f(e.jsonPropertiesFilter,t,n,r)}function E(t){var n=[];if(t instanceof Object)for(var r in t)r.toString().indexOf("__")==-1&&r.toString().indexOf(e.attributePrefix)==0&&n.push(r);return n}function S(t){var n="";return t.__cdata!=null&&(n+="<![CDATA["+t.__cdata+"]]>"),t.__text!=null&&(e.escapeMode?n+=u(t.__text):n+=t.__text),n}function x(t){var n="";return t instanceof Object?n+=S(t):t!=null&&(e.escapeMode?n+=u(t):n+=t),n}function T(e,t){return e===""?t:e+"."+t}function N(e,t,n,r){var i="";if(e.length==0)i+=v(e,t,n,!0);else for(var s=0;s<e.length;s++)i+=v(e[s],t,E(e[s]),!1),i+=C(e[s],T(r,t)),i+=m(e[s],t);return i}function C(e,t){var n="",r=b(e);if(r>0)for(var i in e){if(y(e,i)||t!=""&&!w(e,i,T(t,i)))continue;var s=e[i],o=E(s);if(s==null||s==undefined)n+=v(s,i,o,!0);else if(s instanceof Object)if(s instanceof Array)n+=N(s,i,o,t);else if(s instanceof Date)n+=v(s,i,o,!1),n+=s.toISOString(),n+=m(s,i);else{var u=b(s);u>0||s.__text!=null||s.__cdata!=null?(n+=v(s,i,o,!1),n+=C(s,T(t,i)),n+=m(s,i)):n+=v(s,i,o,!0)}else n+=v(s,i,o,!1),n+=x(s),n+=m(s,i)}return n+=x(e),n}var t="1.2.0";e=e||{},n(),i();var r={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(e===undefined)return null;var n;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!t)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(s){i=null}try{n=r.parseFromString(e,"text/xml"),i!=null&&n.getElementsByTagNameNS(i,"parsererror").length>0&&(n=null)}catch(s){n=null}}else e.indexOf("<?")==0&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return e===undefined||e==null?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():typeof e=="number"?(new Date(e)).toISOString():null},this.asDateTime=function(e){return typeof e=="string"?c(e):e},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return t!=null?this.xml2json(t):null},this.json2xml_str=function(e){return C(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return t}}});